*---------------------------------------------------------------------------------
* TYN612M SCR SPICE Model (v3 - Corregido Disparo por Ruptura)
*
* Vdrm = 600V, It(rms) = 12A, Igt(max) = 15mA
* - Modelo de 2 transistores
* - Simula corriente de mantenimiento (Ih)
* - Simula sensibilidad dV/dt
* - Simula disparo por ruptura Vbo @ 600V
*---------------------------------------------------------------------------------
.SUBCKT TYN612M A K G
* NODES: ANODE, KATHODE, GATE
* Nodos Internos: N2 (Base PNP/Colector NPN), G_int (Base NPN interna)

* --- Modelo de 2 transistores ---
Q1 A N2 K Q_PNP
Q2 N2 G_int K Q_NPN

* --- Componentes de disparo y mantenimiento ---
* R_shunt: Fija la corriente de mantenimiento (Ih = Vbe_on / R_shunt)
R_shunt N2 K 35

* C_dvdt: Sensibilidad al dV/dt
C_dvdt N2 G_int 30p

* R_gate: Resistencia interna de la compuerta
R_gate G G_int 10

* D_rev: Proteccion de compuerta inversa
D_rev K G D_gate_protection

* --- Disparo por Tension de Ruptura (Vbo) <<< ---
* El anodo del diodo Zener se conecta a la compuerta interna (G_int).
* El catodo del diodo Zener se conecta al Anodo del SCR (A).
*
* D_break [Nodo Anodo] [Nodo Catodo] [Modelo]
D_break G_int A D_vbo

* --- Modelos de los transistores y diodos ---
.MODEL Q_NPN NPN(Is=5e-9 Bf=25 Vaf=120 Ikf=25 Cjc=40p Cje=120p Tf=1.5u Tr=10u)
.MODEL Q_PNP PNP(Is=2e-9 Bf=1.5 Vaf=80 Ikf=1)
.MODEL D_gate_protection D(BV=5 Rs=0.1)

* Modelo del diodo de ruptura (Zener)
* BV=600 significa que rompe a 600V en inversa.
.MODEL D_vbo D(BV=600 Rs=10)

.ENDS TYN612M
